<%- include ('./partials/head.ejs') %>

<% if (user) { %>
    <% console.log(user.role); %>
    <% if (user.role === 1) { %>
        <div class="position-relative " style="width: 100%;">
            <h1 style="text-align:center;">Usuarios registrados</h1>
            <% if (users.length > 0) { %>
                <div class="user p-2 bg-dark">
                    <% users.forEach(user => { %>
                        <h4 class="text-light"><%= user.name %> </h4>
                        <h4 class="text-light"><%= user.email %> </h4>
                        <a href="/user/deleteUser/<%= user.id %> class="text-light"">deleteUser</a>
                        <a href="/user/editUser/<%= user.id %> class="text-light"">editUser</a>
                    <% }) %>
                </div>
            <% }else {%>
                <h3>No hay usuarios registrados</h3>
            <% } %>
        </div>
    <% } %>
<% } %>

<div class="container bg-dark d-flex row">
    <div class="col-sm-12">
        <h3 class="bg-primary text-light text-center p-1 rounded-pill">Comics Mas Gustados de la Semana!</h3>
        <% if (likedThisWeek.length>0) { %>
            <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <% for( let i = 0; i < likedThisWeek.length; i++ ) { %>
                        <% if (likedThisWeek[i]) { %>
                            <div <% if (i === 0) { %> class="carousel-item active" <% } else {%> class="carousel-item" <% } %> >
                                <a class="position-relative justify-content-center" href=<%= `/read/${likedThisWeek[i].id}` %>>
                                    <img src="<%= likedThisWeek[i].comicCoverPath %>" class="d-block mx-auto img-fluid" style="max-height: 500px; min-height: 500px;">
                                    <div class="carousel-caption d-none d-md-block">
                                        <h3 class="text-center"> <%= likedThisWeek[i].comicName %></h3>
                                    </div>
                                </a>
                            </div>
                        <% } %>
                    <% } %>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Anterior</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Siguiente</span>
                </button>
            </div>
        <% } %>
    </div>
    <div class="col-sm-12">
        <% if (newComics.length>0) { %>
            <h3 class="bg-primary text-light text-center rounded-pill">Comics Nuevos!</h3>
            <% for( let i = 0; i < 5; i++ ) { %>
                <% if (newComics[i]) { %>
                    <div class="bg-secondary position-relative p-1">
                        <div class="bg-dark p-2 position-relative">
                            <a class="px-auto text-light" href=<%= `/read/${newComics[i].id}` %>>
                                <img src="<%= newComics[i].comicCoverPath %>" class="img-fluid" width="100%" height="100%">
                            </a>
                        </div>
                        <p class="position-absolute bottom-0 w-100 fs-4 text-info bg-secondary">
                            Titulo: <%= newComics[i].comicName %>
                            <br>
                            Autor: <%= newComics[i].comicWriter %>
                        </p>
                    </div>
                <% } %>
            <% } %>
        <% } %>
    </div>
</div>



<% if (updatedComics.length>0) { %>
    <br>
    <h3 class="bg-primary text-light py-1">Comics Recientemente Actualizados!</h3>
    <% for( let i = 0; i < 5; i++ ) { %>
        <% if (updatedComics[i]) { %>
            <div class="comic_block_wrapper bg-secondary p-2">
                <div class="bg-dark p-2">
                    <a href=<%= `/read/${updatedComics[i].id}` %>>
                        <img src="<%= updatedComics[i].comicCoverPath %>" width="100px" height="100px">
                        <h3>title: <%= updatedComics[i].comicName %></h3>
                        <h3>Author: <%= updatedComics[i].comicWriter %></h3>
                        <h3>Status: <%= updatedComics[i].comicStatus %></h3>
                    </a>
                </div>
            </div>
        <% } %>
    <% } %>
<% } %>


<% if (rngTags) { %>
    <br>
    <h3 class="bg-primary text-light py-1">Comics categoria: <%= rngTags[0] %> </h3>
    <% for( let i = 0; i < 5; i++ ) { %>
        <% if (randomTag1[i]) { %>
            <div class="comic_block_wrapper bg-secondary p-2">
                <div class="bg-dark p-2">
                    <a href=<%= `/read/${randomTag1[i].id}` %>>
                        <img src="<%= randomTag1[i].comicCoverPath %>" width="100px" height="100px">
                        <h3>title: <%= randomTag1[i].comicName %></h3>
                        <h3>Author: <%= randomTag1[i].comicWriter %></h3>
                        <h3>Status: <%= randomTag1[i].comicStatus %></h3>
                    </a>
                </div>
            </div>
        <% } %>
    <% } %>
    <br>
    <h3 class="bg-primary text-light py-1">Comics categoria: <%= rngTags[1] %></h3>
    <% for( let i = 0; i < 5; i++ ) { %>
        <% if (randomTag2[i]) { %>
            <div class="comic_block_wrapper bg-secondary p-2">
                <div class="bg-dark p-2">
                    <a href=<%= `/read/${randomTag2[i].id}` %>>
                        <img src="<%= randomTag2[i].comicCoverPath %>" width="100px" height="100px">
                        <h3>title: <%= randomTag2[i].comicName %></h3>
                        <h3>Author: <%= randomTag2[i].comicWriter %></h3>
                        <h3>Status: <%= randomTag2[i].comicStatus %></h3>
                    </a>
                </div>
            </div>
        <% } %>
    <% } %>
<% } %>

<%- include ('./partials/footer.ejs') %>
